(self.webpackChunksm_platform_docs=self.webpackChunksm_platform_docs||[]).push([[179],{3905:function(e,t,o){"use strict";o.d(t,{Zo:function(){return p},kt:function(){return u}});var n=o(7294);function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var c=n.createContext({}),l=function(e){var t=n.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var o=e.components,i=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(o),u=i,m=d["".concat(c,".").concat(u)]||d[u]||h[u]||a;return o?n.createElement(m,r(r({ref:t},p),{},{components:o})):n.createElement(m,r({ref:t},p))}));function u(e,t){var o=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=o.length,r=new Array(a);r[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var l=2;l<a;l++)r[l]=o[l];return n.createElement.apply(null,r)}return n.createElement.apply(null,o)}d.displayName="MDXCreateElement"},7168:function(e,t,o){"use strict";o.r(t),o.d(t,{frontMatter:function(){return r},metadata:function(){return s},toc:function(){return c},default:function(){return p}});var n=o(2122),i=o(9756),a=(o(7294),o(3905)),r={id:"activations",title:"Mining - Activations",sidebar_label:"Activations"},s={unversionedId:"protocol/mining/activations",id:"version-0.1.0/protocol/mining/activations",isDocsHomePage:!1,title:"Mining - Activations",description:"Miners become eligible to mine in Spacemesh by publishing an Activation Transaction (ATX). The ATX is a Spacemesh-specific data structure that contains a NIPoST, a publicly verifiable, self-contained proof that the miner committed some space-time resources to the protocol.",source:"@site/versioned_docs/version-0.1.0/protocol/mining/05-atx.md",sourceDirName:"protocol/mining",slug:"/protocol/mining/activations",permalink:"/docs/protocol/mining/activations",editUrl:"https://github.com/spacemeshos/platform-docs/blob/main/versioned_docs/version-0.1.0/protocol/mining/05-atx.md",version:"0.1.0",lastUpdatedBy:"Aviv Eyal",lastUpdatedAt:1615316854,formattedLastUpdatedAt:"3/9/2021",sidebar_label:"Activations",sidebarPosition:5,frontMatter:{id:"activations",title:"Mining - Activations",sidebar_label:"Activations"}},c=[{value:"Epochs and eligibility",id:"epochs-and-eligibility",children:[]},{value:"Construction",id:"construction",children:[]},{value:"Validity",id:"validity",children:[]},{value:"Conclusion",id:"conclusion",children:[]}],l={toc:c};function p(e){var t=e.components,o=(0,i.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,n.Z)({},l,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Miners become eligible to mine in Spacemesh by publishing an Activation Transaction (ATX). The ATX is a Spacemesh-specific data structure that contains a ",(0,a.kt)("a",{parentName:"p",href:"/docs/protocol/mining/nipost"},"NIPoST"),", a publicly verifiable, self-contained proof that the miner committed some space-time resources to the protocol."),(0,a.kt)("p",null,"The previous documents in this section describe the ",(0,a.kt)("em",{parentName:"p"},"theory")," behind a set of independent protocols (PoST, PoET, NIPoST) that form the foundation of the Spacemesh mining construction. With ths background in place, we are now ready to see how these building block fit together ",(0,a.kt)("em",{parentName:"p"},"in practice")," to enable the Spacemesh mining construction in the production network. In particular, we'll see how the NIPoST (which itself contains the PoST and PoET) is wrapped, with accompanying metadata, into an ATX and used in the Spacemesh protocol."),(0,a.kt)("h2",{id:"epochs-and-eligibility"},"Epochs and eligibility"),(0,a.kt)("p",null,"In Spacemesh, multiple blocks are produced at each block height: the set of blocks produced at a given height is known as a ",(0,a.kt)("em",{parentName:"p"},"layer.")," Time is divided into ",(0,a.kt)("em",{parentName:"p"},"epochs"),", where an epoch is a fixed number of layers (unlike protocols like Bitcoin where blocks are produced probabilistically, and thus at random intervals, in Spacemesh the length of time between each layer is perfectly fixed and always the same). Every miner publishes one ATX per epoch, which causes the protocol to consider them \u201cactive\u201d in the following epoch."),(0,a.kt)("p",null,"Due to the ",(0,a.kt)("a",{parentName:"p",href:"https://spacemesh.io/race-freeness/"},"race-free nature of the Spacemesh protocol"),", being \u201cactive\u201d guarantees a miner eligibility to produce blocks. The reward calculation and total voting weight of the blocks produced by a given miner in the consensus protocol are proportional to the space-time resources attested to by that miner in the NIPoST (contained in their ATX). An active miner is also eligible to participate in Hare consensus protocol ","[LINK forthcoming]","."),(0,a.kt)("p",null,"An epoch is long enough that each active miner should be able to generate at least one block per epoch (and probably many more)\u2014e.g., if there are 100,000 active miners, and 200 blocks per layer, each epoch should be at least 500 layers long. The positions of a given miner\u2019s blocks within layers in the epoch and the participation period in the Hare protocol are selected using a ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Verifiable_random_function"},"verifiable random function (VRF)"),", a source of randomness that is verifiable, unpredictable and unbiasable by an adversary. This is necessary to ensure (with high probability) that the majority of blocks in every layer is generated by honest parties."),(0,a.kt)("p",null,"[Consider adding an illustration or animation here to make it clearer how and when ATXs are generated, broadcasted, stored, etc.]"),(0,a.kt)("h2",{id:"construction"},"Construction"),(0,a.kt)("p",null,"Unlike the ",(0,a.kt)("a",{parentName:"p",href:"/docs/protocol/mining/post"},"PoST")," and ",(0,a.kt)("a",{parentName:"p",href:"/docs/protocol/mining/poet"},"PoET")," constructions, an ATX is not itself a proof and as such it does not require any additional commitment of resources or complex computation. Instead, like ",(0,a.kt)("a",{parentName:"p",href:"/docs/protocol/mining/nipost"},"NIPoST"),", it\u2019s a data structure that wraps the ATX along with relevant metadata. An ATX is a \u201cfreestanding\u201d transaction: it does not have to be included in a block to be valid, but can just be gossiped to the network directly."),(0,a.kt)("p",null,"In addition to the full NIPoST attested to by the ATX, the ATX also contains fields such as the ID of the previous ATX from the same miner, the time when the eligibility for this ATX starts and ends, and the miner\u2019s signature. See ",(0,a.kt)("a",{parentName:"p",href:"https://spacemesh.io/spacemesh-protocol-v1-0/"},"the full protocol specifications")," for an elaboration of the full contents of the ATX."),(0,a.kt)("h2",{id:"validity"},"Validity"),(0,a.kt)("p",null,"Every valid block ","[LINK forthcoming]"," contains a pointer to a valid ATX that authorizes the miner in question to produce a block in the epoch and layer where the block was produced. In order to determine whether a given block is valid, a miner first fetches the ATX that the block points to, and validates that ATX. The ATX is considered valid if it has a valid signature from the miner, if no duplicate ATX was published, if the NIPoST it contains is valid, and if the time indicated by the ATX matches the duration attested to by the NIPoST. These validation rules prevent a dishonest miner from pre-generating ATXs for multiple identities, reusing the same storage space, and publishing them all in a single future epoch. See ",(0,a.kt)("a",{parentName:"p",href:"https://spacemesh.io/spacemesh-protocol-v1-0/"},"the full protocol specifications")," for a full elaboration of the validation rules for an ATX."),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"Congratulations, dear reader, on making it to the bottom of this deep, dark rabbit hole! With all of the building blocks in place\u2014PoST, PoET, NIPoST, and ATX\u2014you now fully understand all of the components of the Proof of Space-time protocol underlying the Spacemesh blockchain, and how they fit together to allow miners to prove in a publicly verifiable, self-contained, non-interactive fashion that they\u2019ve committed a certain amount of space-time resources to the protocol. Read on to learn about the ",(0,a.kt)("a",{parentName:"p",href:"/docs/protocol/overview#repository-contents"},"other parts of the protocol"),"."))}p.isMDXComponent=!0}}]);